## Question 1
### Q1 1.
S&P-500
```
Date	Year	Month	Day	Weekday	Week_Number	Year_Week	Open	High	Low	Close	Volume	Adj Close	Return	Short_MA	Long_MA	True Label
0	2016-01-04	2016	1	4	Monday	1	2016-01	200.49	201.03	198.59	201.02	222353500	178.05	0.000000	178.050000	178.0500	+
1	2016-01-05	2016	1	5	Tuesday	1	2016-01	201.40	201.90	200.05	201.36	110845800	178.35	0.001692	178.200000	178.2000	+
2	2016-01-06	2016	1	6	Wednesday	1	2016-01	198.34	200.06	197.60	198.82	152112600	176.10	-0.012614	177.500000	177.5000	-
3	2016-01-07	2016	1	7	Thursday	1	2016-01	195.33	197.44	193.59	194.05	213436100	171.88	-0.023992	176.095000	176.0950	-
4	2016-01-08	2016	1	8	Friday	1	2016-01	195.19	195.85	191.58	191.92	209817200	169.99	-0.010977	174.874000	174.8740	-
...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...
1253	2020-12-23	2020	12	23	Wednesday	51	2020-51	368.28	369.62	367.22	367.57	46201400	358.58	0.000899	358.296429	345.3106	+
1254	2020-12-24	2020	12	24	Thursday	51	2020-51	368.08	369.03	367.45	369.00	26457900	359.98	0.003890	358.346429	345.7506	+
1255	2020-12-28	2020	12	28	Monday	52	2020-52	371.74	372.59	371.07	372.17	39000400	363.07	0.008591	358.670000	346.2608	+
1256	2020-12-29	2020	12	29	Tuesday	52	2020-52	373.81	374.00	370.83	371.46	53680500	362.38	-0.001908	358.869286	346.7612	-
1257	2020-12-30	2020	12	30	Wednesday	52	2020-52	372.34	373.10	371.57	371.99	49455300	362.89	0.001427	359.335714	347.3744	+
1258 rows × 17 columns
```

KO stock
```
Date	Year	Month	Day	Weekday	Week_Number	Year_Week	Open	High	Low	Close	Volume	Adj Close	Return	Short_MA	Long_MA	True Label
0	2016-01-04	2016	1	4	Monday	1	2016-01	42.34	42.50	41.97	42.40	16084100	34.13	0.000000	34.130000	34.130000	+
1	2016-01-05	2016	1	5	Tuesday	1	2016-01	42.31	42.63	42.17	42.55	15781900	34.25	0.003538	34.190000	34.190000	+
2	2016-01-06	2016	1	6	Wednesday	1	2016-01	42.20	42.51	42.04	42.32	16245100	34.06	-0.005405	34.146667	34.146667	-
3	2016-01-07	2016	1	7	Thursday	1	2016-01	41.65	42.11	41.45	41.62	20563600	33.50	-0.016541	33.985000	33.985000	-
4	2016-01-08	2016	1	8	Friday	1	2016-01	41.65	42.12	41.41	41.51	14645900	33.41	-0.002643	33.870000	33.870000	-
...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...
1253	2020-12-23	2020	12	23	Wednesday	51	2020-51	52.95	53.39	52.94	53.08	7040300	50.33	0.006065	50.499286	48.862000	+
1254	2020-12-24	2020	12	24	Thursday	51	2020-51	53.02	53.55	53.02	53.44	3265500	50.67	0.006782	50.471429	48.932200	+
1255	2020-12-28	2020	12	28	Monday	52	2020-52	53.85	54.44	53.73	54.16	9020500	51.36	0.013473	50.550714	49.018800	+
1256	2020-12-29	2020	12	29	Tuesday	52	2020-52	54.45	54.49	54.02	54.13	8320600	51.33	-0.000554	50.615000	49.104000	-
1257	2020-12-30	2020	12	30	Wednesday	52	2020-52	54.05	54.63	54.03	54.44	8142700	51.62	0.005727	50.690000	49.202600	+
1258 rows × 17 columns
```

### Q1 2. 

S&P-500 p* = 0.5543766578249337\
KO p* = 0.5411140583554377

### Q1 3.

S&P-500 k=1:\
-- : 0.32432432432432434\
-+ : 0.6756756756756757\
S&P-500 k=2:\
--- : 0.3076923076923077\
--+ : 0.6923076923076923\
S&P-500 k=3:\
---- : 0.2857142857142857\
---+ : 0.7142857142857143

KO k=1:\
-- : 0.3708609271523179\
-+ : 0.6291390728476821\
KO k=2:\
--- : 0.31343283582089554\
--+ : 0.6865671641791045\
KO k=3:\
---- : 0.3103448275862069\
---+ : 0.6896551724137931

### Q1 4. 

S&P-500 k=1:\
++ : 0.41690962099125367\
+- : 0.5830903790087464\
S&P-500 k=2:\
+++ : 0.38285714285714284\
++- : 0.6171428571428571\
S&P-500 k=3:\
++++ : 0.30952380952380953\
+++- : 0.6904761904761905

KO k=1:\
++ : 0.43283582089552236\
+- : 0.5671641791044776\
KO k=2:\
+++ : 0.3614457831325301\
++- : 0.6385542168674698\
KO k=3:\
++++ : 0.38095238095238093\
+++- : 0.6190476190476191

## Question 2

### Q2 1. 
S&P-500
```
Date	Year	Month	Day	Weekday	Week_Number	Year_Week	Open	High	Low	Close	Volume	Adj Close	Return	Short_MA	Long_MA	True Label	Predict Label 2	Predict Label 3	Predict Label 4
754	2019-01-02	2019	1	2	Wednesday	0	2019-00	245.98	251.21	245.95	250.18	126925200	235.14	0.001040	235.427857	248.2308	+	+	+	-
755	2019-01-03	2019	1	3	Thursday	0	2019-00	248.23	248.57	243.67	244.21	144140700	229.53	-0.023863	234.105000	247.6588	-	+	+	+
756	2019-01-04	2019	1	4	Friday	0	2019-00	247.59	253.11	247.17	252.39	142628800	237.21	0.033496	233.337143	247.2636	+	+	+	+
757	2019-01-07	2019	1	7	Monday	1	2019-01	252.69	255.95	251.69	254.38	103139100	239.08	0.007885	233.029286	246.9320	+	+	+	-
758	2019-01-08	2019	1	8	Tuesday	1	2019-01	256.82	257.31	254.00	256.77	102512600	241.33	0.009395	233.223571	246.8002	+	+	+	+
...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...
1253	2020-12-23	2020	12	23	Wednesday	51	2020-51	368.28	369.62	367.22	367.57	46201400	358.58	0.000899	358.296429	345.3106	+	+	+	+
1254	2020-12-24	2020	12	24	Thursday	51	2020-51	368.08	369.03	367.45	369.00	26457900	359.98	0.003890	358.346429	345.7506	+	+	+	+
1255	2020-12-28	2020	12	28	Monday	52	2020-52	371.74	372.59	371.07	372.17	39000400	363.07	0.008591	358.670000	346.2608	+	+	+	+
1256	2020-12-29	2020	12	29	Tuesday	52	2020-52	373.81	374.00	370.83	371.46	53680500	362.38	-0.001908	358.869286	346.7612	-	+	-	-
1257	2020-12-30	2020	12	30	Wednesday	52	2020-52	372.34	373.10	371.57	371.99	49455300	362.89	0.001427	359.335714	347.3744	+	+	+	+
504 rows × 20 columns
```
KO
```
Date	Year	Month	Day	Weekday	Week_Number	Year_Week	Open	High	Low	Close	Volume	Adj Close	Return	Short_MA	Long_MA	True Label	Predict Label 2	Predict Label 3	Predict Label 4
754	2019-01-02	2019	1	2	Wednesday	0	2019-00	46.94	47.22	46.56	46.93	11603700	41.71	-0.008870	42.507143	42.8642	-	+	+	+
755	2019-01-03	2019	1	3	Thursday	0	2019-00	46.82	47.37	46.53	46.64	14714400	41.45	-0.006179	42.343571	42.8762	-	+	+	+
756	2019-01-04	2019	1	4	Friday	0	2019-00	46.75	47.57	46.64	47.57	13013700	42.28	0.019940	42.222857	42.9112	+	+	+	+
757	2019-01-07	2019	1	7	Monday	1	2019-01	47.57	47.75	46.90	46.95	13135500	41.73	-0.013034	42.071429	42.9282	-	+	+	+
758	2019-01-08	2019	1	8	Tuesday	1	2019-01	47.25	47.57	47.04	47.48	15420700	42.20	0.011289	42.017857	42.9482	+	+	+	-
...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...
1253	2020-12-23	2020	12	23	Wednesday	51	2020-51	52.95	53.39	52.94	53.08	7040300	50.33	0.006065	50.499286	48.8620	+	+	+	+
1254	2020-12-24	2020	12	24	Thursday	51	2020-51	53.02	53.55	53.02	53.44	3265500	50.67	0.006782	50.471429	48.9322	+	+	+	+
1255	2020-12-28	2020	12	28	Monday	52	2020-52	53.85	54.44	53.73	54.16	9020500	51.36	0.013473	50.550714	49.0188	+	+	-	-
1256	2020-12-29	2020	12	29	Tuesday	52	2020-52	54.45	54.49	54.02	54.13	8320600	51.33	-0.000554	50.615000	49.1040	-	+	+	+
1257	2020-12-30	2020	12	30	Wednesday	52	2020-52	54.05	54.63	54.03	54.44	8142700	51.62	0.005727	50.690000	49.2026	+	+	+	+
504 rows × 20 columns
```
### Q2 2.
S&P-500\
W = 2 accuracy of '+' :  1.0\
W = 2 accuracy of '-' :  0.0\
W = 2 total accuracy :  0.5853174603174603

W = 3 accuracy of '+' :  0.8372881355932204\
W = 3 accuracy of '-' :  0.22966507177033493\
W = 3 total accuracy :  0.5853174603174603

W = 4 accuracy of '+' :  0.8\
W = 4 accuracy of '-' :  0.2583732057416268\
W = 4 total accuracy :  0.5753968253968254

KO\
W = 2 accuracy of '+' :  1.0\
W = 2 accuracy of '-' :  0.0\
W = 2 accuracy -  0.5337301587301587

W = 3 accuracy of '+' :  0.8661710037174721\
W = 3 accuracy of '-' :  0.12340425531914893\
W = 3 accuracy -  0.5198412698412699

W = 4 accuracy of '+' :  0.6468401486988847\
W = 4 accuracy of '-' :  0.28936170212765955\
W = 4 accuracy -  0.4801587301587302

### Q2 3.
W=2 accuracy is the highest for the KO stock\
W=2 and W=3 accuracies are the highest for the S&P-500 stock

## Question 3
### Q3 1.
S&P-500
```
Date	Year	Month	Day	Weekday	Week_Number	Year_Week	Open	High	Low	...	Volume	Adj Close	Return	Short_MA	Long_MA	True Label	Predict Label 2	Predict Label 3	Predict Label 4	Ensemble Predict
754	2019-01-02	2019	1	2	Wednesday	0	2019-00	245.98	251.21	245.95	...	126925200	235.14	0.001040	235.427857	248.2308	+	+	+	-	+
755	2019-01-03	2019	1	3	Thursday	0	2019-00	248.23	248.57	243.67	...	144140700	229.53	-0.023863	234.105000	247.6588	-	+	+	+	+
756	2019-01-04	2019	1	4	Friday	0	2019-00	247.59	253.11	247.17	...	142628800	237.21	0.033496	233.337143	247.2636	+	+	+	+	+
757	2019-01-07	2019	1	7	Monday	1	2019-01	252.69	255.95	251.69	...	103139100	239.08	0.007885	233.029286	246.9320	+	+	+	-	+
758	2019-01-08	2019	1	8	Tuesday	1	2019-01	256.82	257.31	254.00	...	102512600	241.33	0.009395	233.223571	246.8002	+	+	+	+	+
...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...
1253	2020-12-23	2020	12	23	Wednesday	51	2020-51	368.28	369.62	367.22	...	46201400	358.58	0.000899	358.296429	345.3106	+	+	+	+	+
1254	2020-12-24	2020	12	24	Thursday	51	2020-51	368.08	369.03	367.45	...	26457900	359.98	0.003890	358.346429	345.7506	+	+	+	+	+
1255	2020-12-28	2020	12	28	Monday	52	2020-52	371.74	372.59	371.07	...	39000400	363.07	0.008591	358.670000	346.2608	+	+	+	+	+
1256	2020-12-29	2020	12	29	Tuesday	52	2020-52	373.81	374.00	370.83	...	53680500	362.38	-0.001908	358.869286	346.7612	-	+	-	-	-
1257	2020-12-30	2020	12	30	Wednesday	52	2020-52	372.34	373.10	371.57	...	49455300	362.89	0.001427	359.335714	347.3744	+	+	+	+	+
504 rows × 21 columns
```
KO
```
Date	Year	Month	Day	Weekday	Week_Number	Year_Week	Open	High	Low	...	Volume	Adj Close	Return	Short_MA	Long_MA	True Label	Predict Label 2	Predict Label 3	Predict Label 4	Ensemble Predict
754	2019-01-02	2019	1	2	Wednesday	0	2019-00	46.94	47.22	46.56	...	11603700	41.71	-0.008870	42.507143	42.8642	-	+	+	+	+
755	2019-01-03	2019	1	3	Thursday	0	2019-00	46.82	47.37	46.53	...	14714400	41.45	-0.006179	42.343571	42.8762	-	+	+	+	+
756	2019-01-04	2019	1	4	Friday	0	2019-00	46.75	47.57	46.64	...	13013700	42.28	0.019940	42.222857	42.9112	+	+	+	+	+
757	2019-01-07	2019	1	7	Monday	1	2019-01	47.57	47.75	46.90	...	13135500	41.73	-0.013034	42.071429	42.9282	-	+	+	+	+
758	2019-01-08	2019	1	8	Tuesday	1	2019-01	47.25	47.57	47.04	...	15420700	42.20	0.011289	42.017857	42.9482	+	+	+	-	+
...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...	...
1253	2020-12-23	2020	12	23	Wednesday	51	2020-51	52.95	53.39	52.94	...	7040300	50.33	0.006065	50.499286	48.8620	+	+	+	+	+
1254	2020-12-24	2020	12	24	Thursday	51	2020-51	53.02	53.55	53.02	...	3265500	50.67	0.006782	50.471429	48.9322	+	+	+	+	+
1255	2020-12-28	2020	12	28	Monday	52	2020-52	53.85	54.44	53.73	...	9020500	51.36	0.013473	50.550714	49.0188	+	+	-	-	-
1256	2020-12-29	2020	12	29	Tuesday	52	2020-52	54.45	54.49	54.02	...	8320600	51.33	-0.000554	50.615000	49.1040	-	+	+	+	+
1257	2020-12-30	2020	12	30	Wednesday	52	2020-52	54.05	54.63	54.03	...	8142700	51.62	0.005727	50.690000	49.2026	+	+	+	+	+
504 rows × 21 columns
```
### Q3 2.
S&P-500\
Ensemble accuracy of '+' :  0.9220338983050848\
Ensemble accuracy of '-' :  0.11961722488038277\
Ensemble total accuracy :  0.5892857142857143

KO\
Ensemble accuracy of '+' :  0.9368029739776952\
Ensemble accuracy of '-' :  0.05106382978723404\
Ensemble total accuracy :  0.5238095238095238

### Q3 3.
For S&P-500 the accuracy of predicting '-' in ensemble is better than only W=2\
For KO the accuracy of predicting '-' in ensemble is better than only W=2

### Q3 4.
For S&P-500 the accuracy of predicting '+' in ensemble is better than W=3 and W=4\
For KO the accuracy of predicting '+' in ensemble is better than W=3 and W=4

## Question 4
### Q4 1., 2., 3., 4., 5., 6.
S&P-500\
W=2\
TP - 295 , FP - 209 , TN - 0 , FN -  0\
TPR - 1.0\
TNR - 0.0

W=3\
TP - 247 , FP - 161 , TN - 48 , FN -  48\
TPR - 0.8372881355932204\
TNR - 0.22966507177033493

W=4\
TP - 236 , FP - 155 , TN - 54 , FN -  59\
TPR - 0.8\
TNR - 0.2583732057416268

Ensemble\
TP - 272 , FP - 184 , TN - 25 , FN -  23\
TPR - 0.9220338983050848\
TNR - 0.11961722488038277

KO\
W=2\
TP - 269 , FP - 235 , TN - 0 , FN -  0\
TPR - 1.0\
TNR - 0.0

W=3\
TP - 233 , FP - 206 , TN - 29 , FN -  36\
TPR - 0.8661710037174721\
TNR - 0.12340425531914893

W=4\
TP - 174 , FP - 167 , TN - 68 , FN -  95\
TPR - 0.6468401486988847\
TNR - 0.28936170212765955

Ensemble\
TP - 252 , FP - 223 , TN - 12 , FN -  17\
TPR - 0.9368029739776952\
TNR - 0.05106382978723404

### Q4 7.

|ind  | W	|ticker	|TP	|FP	|TN	|FN	|accuracy	|TPR|	TNR|
|---  | ---	|---	|---	|---	|---	|---	|---	|---|	---|
|0	|2	|S&P-500|	295.0|	209.0	|0.0	|0.0	|0.585317|	1.000000|	0.000000|
|1|	3	|S&P-500	|247.0|	161.0|	48.0|	48.0|	0.585317|	0.837288|	0.229665|
|2	|4	|S&P-500|	236.0|	155.0|	54.0|	59.0|	0.575397|	0.800000|	0.258373|
|3|	Ensemble|	S&P-500|	272.0|	184.0|	25.0|	23.0|	0.589286|	0.922034|	0.119617|
|4	|2|	KO	|269.0|	235.0|	0.0|	0.0	|0.533730|	1.000000|	0.000000|
|5|	3|	KO|	233.0|	206.0|	29.0|	36.0|	0.519841|	0.866171|	0.123404|
|6|	4|	KO|174.0|	167.0|	68.0|	95.0|	0.480159|	0.646840|	0.289362|
|7|	Ensemble|	KO|	252.0|	223.0|	12.0|	17.0	|0.523810|	0.936803|	0.051064|

### Q4 8.
w2 has highest TP and FP while it has the least TN and FN for both SPY and Ko ticker.

## Question 5
### Q5 1.
![KO Graph](/Q8-2.png)
### Q5 2.
There is a huge dip in returns of the stock during the beginning of 2020 and then there was considerable rise of the returns.\
W=2 graph is the most similar to the Buy and Hold graph